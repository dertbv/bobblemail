#!/bin/bash
# ATLAS Session Save - Quick Save Command
# Usage: ./save-session

echo "ğŸ’¾ ATLAS Session Save"
echo "====================="

echo "Saving current session state..."

python3 -c "
import json
import os
from datetime import datetime

# Check if session state exists
if os.path.exists('.session_state.json'):
    print('ğŸ“‹ Previous session found - updating...')
    with open('.session_state.json', 'r') as f:
        state = json.load(f)
    
    # Update timestamp
    state['session_info']['timestamp'] = datetime.now().isoformat()
    state['session_info']['session_time'] = datetime.now().strftime('%H:%M:%S')
    state['session_notes'] = f'Session saved manually at {datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\")}'
    
    with open('.session_state.json', 'w') as f:
        json.dump(state, f, indent=2)
    
    print('âœ… Session state updated!')
    print(f'ğŸ“Š Todos in session: {len(state.get(\"todolist\", []))}')
else:
    print('ğŸ“ No session state found - use TodoWrite first')
"

echo ""
echo "ğŸ’¡ Use './atlas-restore' to restore this session later"